% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prevalence-DELTA_plots.R
\name{deltaplot_prevalence}
\alias{deltaplot_prevalence}
\title{Δ prevalence vs pooled prevalence (per peptide)}
\usage{
deltaplot_prevalence(
  d,
  group_pair = NULL,
  labels = NULL,
  jitter_width = 0.005,
  jitter_height = 0.005,
  point_alpha = 0.25,
  point_size = 0.6,
  smooth = TRUE,
  smooth_k = 5,
  arrow_color = "red",
  arrow_length_mm = 4,
  arrow_pos_x = 0.97,
  title = NULL,
  subtitle = NULL,
  xlab = NULL,
  ylab = NULL
)
}
\arguments{
\item{jitter_width, jitter_height}{Jitter amounts for the points. Defaults 0.005.}

\item{point_alpha}{Point transparency. Default 0.25.}

\item{point_size}{Point size. Default 0.6.}

\item{smooth}{Add a GAM smooth curve (\code{mgcv}). Default \code{TRUE}.}

\item{smooth_k}{Basis dimension \code{k} for the smooth. Default 5.}

\item{arrow_color}{Color for the directional arrows and labels. Default \code{"red"}.}

\item{arrow_length_mm}{Arrow length in mm. Default 4.}

\item{arrow_pos_x}{Where to place arrows horizontally as a fraction of the
max pooled prevalence in the data. Default 0.97 (near the right edge).}

\item{title, subtitle, xlab, ylab}{Optional plot labels.}

\item{prev_tbl}{Long table with at least three columns: \code{peptide_id},
\code{group_col} (defaults to \code{"Group"}), and \code{value_col} (defaults to \code{"Prevalence"}).}

\item{group_col}{Name of the column with the group labels. Default \code{"Group"}.}

\item{value_col}{Name of the column with prevalence values. Default \code{"Prevalence"}.}

\item{peptide_col}{Name of the peptide id column. Default \code{"peptide_id"}.}

\item{group_order}{Optional character vector of length 2 giving the order
(c(group1, group2)). If \code{NULL}, the function uses the unique values found
in \code{group_col} (sorted).}
}
\value{
A \code{ggplot} object.
}
\description{
Build a static ggplot showing the per-peptide shift in prevalence
(Δ = group2 − group1) as a function of pooled prevalence ((group1 + group2)/2).
Intended for inputs like \code{make_prev_tbl()} (long format with columns
\code{peptide_id}, \code{Group}, \code{Prevalence}).
}
\examples{
\dontrun{
prev_tbl <- make_prev_tbl(x_kid1, rank="is_flagellum", g1="T2", g2="T8", feature_value=TRUE)
p <- deltaplot_prevalence(prev_tbl, group_order = c("B","M12"))
}

}
