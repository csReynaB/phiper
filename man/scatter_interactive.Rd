% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prevalence-POP_plots.R
\name{scatter_interactive}
\alias{scatter_interactive}
\title{Interactive prevalence scatter for \code{ph_prev_result}}
\usage{
scatter_interactive(
  df,
  pair = NULL,
  rank = NULL,
  universe = NULL,
  features = NULL,
  features_regex = FALSE,
  universe_regex = FALSE,
  xlab = NULL,
  ylab = NULL,
  alpha = 0.05,
  prefer_flags = TRUE,
  color_by = NULL,
  color_title = NULL,
  point_size = 7,
  point_alpha = 0.85,
  jitter_width_pp = 0,
  jitter_height_pp = 0,
  font_family = NULL,
  font_size = 12
)
}
\arguments{
\item{df}{a \code{ph_prev_result} or a \code{data.frame} with columns:
\code{percent1}, \code{percent2}, \code{feature}, \code{group1}, \code{group2},
\code{p_raw}, \code{p_adj_rank}, \code{p_adj_rank_wbh}, \code{category_rank_wbh},
optionally \code{n_peptides}, \code{rank}, \code{peptide_id}, \code{group_col}.}

\item{pair}{optional length-2 character, e.g. \code{c("kid_serum::T2","kid_serum::T8")}.
only used when \code{df} is a \code{ph_prev_result}; filters rows to that exact pair
(order-agnostic).}

\item{rank}{optional single rank (character) to keep (only used with \code{ph_prev_result}).}

\item{universe}{optional \code{group_col} value or regex (if \code{universe_regex = TRUE});
only used with \code{ph_prev_result}.}

\item{features}{optional character vector or regex patterns (if \code{features_regex = TRUE});
only used with \code{ph_prev_result}.}

\item{features_regex}{logical; treat \code{features} as regex patterns (or).}

\item{universe_regex}{logical; treat \code{universe} as regex pattern(s) (or).}

\item{xlab, ylab}{axis labels; if missing and \code{pair} is provided, they default
to \code{pair[1]} and \code{pair[2]}.}

\item{alpha}{numeric in (0,1]; used only for nominal labels; not the plotly alpha.}

\item{prefer_flags}{logical; reserved for future use (kept for back-compat).}

\item{color_by}{optional peptide-level meta column name to color by.}

\item{color_title}{optional legend title for \code{color_by}.}
}
\value{
a \code{plotly} object.
}
\description{
creates an interactive scatter (plotly) comparing prevalence in \strong{group a}
vs \strong{group b} for per-feature results produced by \code{ph_prevalence_compare()}.
accepts either a \code{ph_prev_result} (recommended) or a plain data.frame with the
same columns (\code{percent1}, \code{percent2}, \code{feature}, \code{group1}, \code{group2}, etc.).

when a \code{ph_prev_result} is passed, you may specify a concrete pair of group
levels via \code{pair = c("A","B")}, and optionally restrict to a \code{rank}, a
\code{universe} (\code{group_col}) and/or \code{features}. internally, subsetting uses
\code{prev_filter_pairs()}, preserving metadata.

color mapping:
\itemize{
\item by default (when \code{color_by = NULL}), points are colored by \code{category_rank_wbh}
with three levels: "significant (wBH, per rank)", "nominal only",
"not significant".
\item when \code{color_by} is a peptide-level meta column name (e.g. \code{"is_flagellum"}),
the function tries to join peptide metadata using \code{peptide_id} (or \code{feature}
if \code{rank == "peptide_id"}), and color by that variable.
}
}
\examples{
# typical usage with ph_prev_result:
# p <- scatter_interactive(scatters,
#   pair     = c("kid_serum::T2","kid_serum::T8"),
#   rank     = "peptide_id",
#   color_by = "is_flagellum",
#   color_title = "Flagellum"
# )
# p

}
