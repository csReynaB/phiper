% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/phip_data-validator.R
\name{phip_expand_full_grid}
\alias{phip_expand_full_grid}
\alias{phip_expand_full_grid.data.frame}
\alias{phip_expand_full_grid.tbl_lazy}
\alias{phip_expand_full_grid.phip_data}
\title{Expand to a full \verb{sample_id × peptide_id} grid}
\usage{
phip_expand_full_grid(x, ...)

\method{phip_expand_full_grid}{data.frame}(
  x,
  key_col = "sample_id",
  id_col = "peptide_id",
  fill_override = NULL,
  add_exist = FALSE,
  exist_col = "exist",
  ...
)

\method{phip_expand_full_grid}{tbl_lazy}(
  x,
  key_col = "sample_id",
  id_col = "peptide_id",
  fill_override = NULL,
  add_exist = FALSE,
  exist_col = "exist",
  ...
)

\method{phip_expand_full_grid}{phip_data}(
  x,
  key_col = "sample_id",
  id_col = "peptide_id",
  fill_override = NULL,
  add_exist = FALSE,
  exist_col = "exist",
  ...
)
}
\arguments{
\item{x}{Input object: a data frame / tibble, a lazy \code{dbplyr} table, or a
\verb{<phip_data>} object.}

\item{...}{Passed on to methods; currently unused.}

\item{key_col}{Name of the sample identifier column. Default \code{"sample_id"}.}

\item{id_col}{Name of the peptide identifier column. Default \code{"peptide_id"}.}

\item{fill_override}{Optional named list of fill values for \strong{introduced} rows,
e.g. \code{list(present = 0L, fold_change = NA_real_)}. Overrides the defaults.}
}
\value{
\itemize{
\item data.frame/tbl_lazy methods: object of the same general kind (local or lazy).
\item phip_data method: the updated \verb{<phip_data>} object (invisibly or visibly,
depending on how you call it).
}
}
\description{
Creates the full Cartesian product of samples and peptides and joins
back per-sample metadata. For rows introduced by the expansion,
numeric/integer cell-level columns are filled with \code{0} (and logicals
with \code{FALSE}) unless overridden with \code{fill_override}.
}
\details{
Works with local data frames and lazy \code{dbplyr} tables. The \code{phip_data}
method updates and returns the object (keeping laziness unless you
later \code{compute()} / \code{collect()} or use \code{\link[=phip_register_tbl]{phip_register_tbl()}}).
}
\section{Method dispatch}{

\itemize{
\item \code{phip_expand_full_grid.data.frame()} – returns a (local) data frame/tibble.
\item \code{phip_expand_full_grid.tbl_lazy()}   – returns a lazy table (still lazy).
\item \code{phip_expand_full_grid.phip_data()}  – updates \code{x$data_long} and returns \code{x}.
}
}

\examples{
\dontrun{
# local tibble
df_expanded <- phip_expand_full_grid(df_long)

# lazy (DuckDB)
df_lazy <- dplyr::tbl(con, "data_long")
df_lazy2 <- phip_expand_full_grid(df_lazy)
dplyr::compute(df_lazy2, name = "data_long_full", temporary = TRUE)

# <phip_data>: update in place & reassign
pd <- phip_expand_full_grid(pd, fill_override = list(fold_change = NA_real_))
}

}
\seealso{
\code{\link[=phip_register_tbl]{phip_register_tbl()}}, \code{\link[=validate_phip_data]{validate_phip_data()}}
}
